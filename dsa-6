#include <iostream>
#include <stack>
#include <string>
#include <algorithm>
using namespace std;

int precedence(char op) {
if (op == '+' || op == '-') return 1;
if (op == '*' || op == '/') return 2;
if (op == '^') return 3;
return 0;
}

bool isOperator(char c) {
return (c == '+' || c == '-' || c == '*' || c == '/' || c == '^');
}

string infixToPostfix(const string& infix) {
stack<char> st;
string postfix;

for (char c : infix) {
if (isalnum(c)) {

postfix += c;
} else if (c == '(') {
st.push(c);
} else if (c == ')') {
while (!st.empty() && st.top() != '(') {
postfix += st.top();
st.pop();
}
if (!st.empty()) st.pop();
} else if (isOperator(c)) {
while (!st.empty() && precedence(c) <= precedence(st.top())) {
postfix += st.top();
st.pop();
}
st.push(c);
}
}

while (!st.empty()) {
postfix += st.top();
st.pop();
}

return postfix;
}

string infixToPrefix(string infix) {
reverse(infix.begin(), infix.end());

for (char& c : infix) {
if (c == '(') c = ')';

else if (c == ')') c = '(';
}

string postfix = infixToPostfix(infix);
reverse(postfix.begin(), postfix.end());
return postfix;
}

int main() {
string infix;
cout << "Enter infix expression: ";
cin >> infix;

string postfix = infixToPostfix(infix);
string prefix = infixToPrefix(infix);

cout << "\nPostfix Expression: " << postfix;
cout << "\nPrefix Expression: " << prefix << endl;

return 0;
}
